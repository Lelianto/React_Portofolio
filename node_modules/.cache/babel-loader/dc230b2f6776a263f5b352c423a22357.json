{"ast":null,"code":"import _classCallCheck from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'../styles/bootstrap.min.css';import'../styles/profileUser.css';import'../styles/loading.css';import{withRouter,Link,Redirect}from'react-router-dom';import{connect}from'unistore/react';import{store,actions}from'../store';import axios from'axios';var TransactionHistory=/*#__PURE__*/function(_React$Component){_inherits(TransactionHistory,_React$Component);function TransactionHistory(){var _getPrototypeOf2;var _this;_classCallCheck(this,TransactionHistory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TransactionHistory)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.getAllCart=function(){var req={method:\"get\",url:store.getState().baseUrl+\"/cart/allcart\",headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}};var self=_assertThisInitialized(_this);axios(req).then(function(response){store.setState({userAllCart:response.data,isLoading:false});return response;}).catch(function(error){store.setState({isLoading:false});switch(error.response.status){case 401:self.props.history.push('/401');break;case 403:self.props.history.push('/403');break;case 404:self.props.history.push('/404');break;case 500:self.props.history.push('/500');break;default:break;}});};_this.componentDidMount=function(){_this.getAllCart();};return _this;}_createClass(TransactionHistory,[{key:\"render\",value:function render(){var _this$props=this.props,userAllCart=_this$props.userAllCart,isLoading=_this$props.isLoading;var displayUserAllCart=userAllCart.filter(function(item){if(item.status_cart==true&&item.email==localStorage.getItem('email')){return item;}return false;});if(isLoading){return React.createElement(\"div\",null,React.createElement(\"body\",{style:{paddingTop:'200px'}},React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-5\"}),React.createElement(\"div\",{className:\"col-md-2\"},React.createElement(\"div\",{class:\"loader\"})),React.createElement(\"div\",{className:\"col-md-5\"})))));}if(localStorage.getItem('token')==null){return React.createElement(Redirect,{to:{pathname:\"/login\"}});}else{return React.createElement(\"div\",{className:\"container\",style:{paddingTop:'110px',fontSize:'12px'}},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-12\"},React.createElement(\"h3\",{style:{textAlign:'left',paddingTop:'20px',paddingBottom:'20px'}},\"Riwayat Transaksi\")),React.createElement(\"table\",{class:\"table table-bordered\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Judul Buku\"),React.createElement(\"th\",null,\"Harga Buku\"),React.createElement(\"th\",null,\"Jumlah Pembelian\"))),React.createElement(\"tbody\",null,displayUserAllCart.map(function(cart,i){return React.createElement(\"tr\",null,React.createElement(\"td\",null,cart.judul),React.createElement(\"td\",null,cart.harga),React.createElement(\"td\",null,cart.stok));})))));}}}]);return TransactionHistory;}(React.Component);export default connect(\"userAllCart, userData, userById, email, isLoading\",actions)(withRouter(TransactionHistory));","map":{"version":3,"sources":["/home/alta17/Desktop/React_Portofolio/porto_react/src/components/transactionHistory.jsx"],"names":["React","withRouter","Link","Redirect","connect","store","actions","axios","TransactionHistory","getAllCart","req","method","url","getState","baseUrl","headers","Authorization","localStorage","getItem","self","then","response","setState","userAllCart","data","isLoading","catch","error","status","props","history","push","componentDidMount","displayUserAllCart","filter","item","status_cart","email","paddingTop","pathname","fontSize","textAlign","paddingBottom","map","cart","i","judul","harga","stok","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles/bootstrap.min.css';\nimport '../styles/profileUser.css';\nimport '../styles/loading.css';\nimport { withRouter, Link, Redirect } from 'react-router-dom';\nimport { connect } from 'unistore/react';\nimport { store, actions } from '../store';\nimport axios from 'axios';\n\nclass TransactionHistory extends React.Component {\n    getAllCart = () => {\n        const req = {\n            method: \"get\",\n            url: store.getState().baseUrl+\"/cart/allcart\",\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem('token')\n            }\n            }; \n            const self = this\n            axios(req)\n                .then(function (response) {\n                    store.setState({ \n                        userAllCart: response.data, \n                        isLoading:false\n                    })\n                    return response\n                })\n                .catch((error)=>{\n                    store.setState({ \n                        isLoading: false\n                    })\n                    switch (error.response.status) {\n                        case 401 :\n                            self.props.history.push('/401')\n                            break\n                        case 403 :\n                            self.props.history.push('/403')\n                            break\n                        case 404 :\n                            self.props.history.push('/404')\n                            break\n                        case 500 :\n                            self.props.history.push('/500')\n                            break\n                        default :\n                            break\n                    }\n                })\n    }\n    // Function to get user data for profile\n    componentDidMount = () => {\n        this.getAllCart()\n    };\n\n    render() {\n        const { userAllCart, isLoading } = this.props\n        const displayUserAllCart = userAllCart.filter(item => {\n            if (item.status_cart == true && item.email == localStorage.getItem('email')) {\n                return item;\n            }\n            return false\n        });\n        if(isLoading){\n            return (\n            <div>\n              <body style={{paddingTop:'200px'}}>\n              <div className='container'>\n                <div className='row'>\n                  <div className='col-md-5'>\n                  </div>\n                  <div className='col-md-2'>\n                    <div class=\"loader\"></div>\n                  </div>\n                  <div className='col-md-5'>\n                  </div>\n                </div>\n               \n              </div>\n            </body>\n            </div>\n            )\n          }\n        if (localStorage.getItem('token') == null){\n            return <Redirect to={{ pathname: \"/login\" }} />;\n        } else {\n            return (\n\n                <div className='container' style={{paddingTop:'110px', fontSize:'12px'}}>\n                <div className='row'>\n                    <div className='col-md-12'>\n                        <h3 style={{textAlign:'left',paddingTop:'20px', paddingBottom:'20px'}}>Riwayat Transaksi</h3>\n                    </div>\n                    <table class=\"table table-bordered\">\n                        <thead>\n                            <tr>\n                                <th>Judul Buku</th>\n                                <th>Harga Buku</th>\n                                <th>Jumlah Pembelian</th>\t\t\t\t\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {displayUserAllCart.map((cart,i) =>\n                            <tr>\n                                <td>{cart.judul}</td>\n                                <td>{cart.harga}</td>\n                                <td>{cart.stok}</td>\n                            </tr>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        \n            )\n        }\n    }\n}\n\nexport default connect(\"userAllCart, userData, userById, email, isLoading\",actions)(withRouter(TransactionHistory));"]},"metadata":{},"sourceType":"module"}