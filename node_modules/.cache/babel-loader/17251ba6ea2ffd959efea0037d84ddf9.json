{"ast":null,"code":"import _regeneratorRuntime from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'../styles/bootstrap.min.css';import'../styles/profileUser.css';import'../styles/loading.css';import photo from'../images/books.png';import photo1 from'../images/exit.png';import{withRouter,Link,Redirect}from'react-router-dom';import{connect}from'unistore/react';import{store,actions}from'../store';import axios from'axios';import swal from'sweetalert';var allGenres=['Romantis','Sejarah','Teenlit','Drama','Fantasi','Chicklit','Komedi','Misteri','Songlit','Thriller','Fan-Fiction','Dewasa','Horor','Petualangan','Metropop'];var ProfileUser=/*#__PURE__*/function(_React$Component){_inherits(ProfileUser,_React$Component);function ProfileUser(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProfileUser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProfileUser)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.handleSignOut=function _callee(){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(localStorage.removeItem('token'));case 2:_context.next=4;return _regeneratorRuntime.awrap(localStorage.removeItem('is_login'));case 4:_context.next=6;return _regeneratorRuntime.awrap(localStorage.removeItem('email'));case 6:swal(\"Terima Kasih!\",\"Silakan login kembali untuk berburu buku!\",\"success\");_this.props.history.push(\"/\");case 8:case\"end\":return _context.stop();}}});};_this.componentDidMount=function(){var req={method:\"get\",url:store.getState().baseUrl+\"/user/profile\",headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}};var self=_assertThisInitialized(_this);axios(req).then(function(response){store.setState({userData:response.data,isLoading:false,validasiPostBuku:false,validasiUpdateBuku:false});return response;}).catch(function(error){store.setState({isLoading:false});switch(error.response.status){case 401:self.props.history.push('/401');break;case 403:self.props.history.push('/403');break;case 404:self.props.history.push('/404');break;case 500:self.props.history.push('/500');break;default:break;}});};return _this;}_createClass(ProfileUser,[{key:\"render\",value:function render(){var _this$props=this.props,userData=_this$props.userData,isLoading=_this$props.isLoading;if(isLoading){return React.createElement(\"div\",null,React.createElement(\"body\",{style:{paddingTop:'200px'}},React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-5\"}),React.createElement(\"div\",{className:\"col-md-2\"},React.createElement(\"div\",{class:\"loader\"})),React.createElement(\"div\",{className:\"col-md-5\"})))));}if(localStorage.getItem('token')==null){return React.createElement(Redirect,{to:{pathname:\"/login\"}});}else{return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"container top-body-user user-full-name\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"h3\",{style:{textAlign:'left'},className:\"border-user1\"},\"Hai, \",userData.nama_lengkap)))),React.createElement(\"div\",{className:\"container alamat-email\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{style:{textAlign:'left'},className:\"col-md-11 col-sm-12\"},userData.email))),React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row space-under-button\"},React.createElement(\"div\",{className:\"col-md-2 col-sm-12 button-sell\"},React.createElement(\"label\",null,React.createElement(Link,{to:\"/sell\"},React.createElement(\"button\",{type:\"button\",class:\"btn btn-info\"},\"Jual Buku \",React.createElement(\"img\",{style:{width:'25px'},src:photo}),\" \")))),React.createElement(\"div\",{className:\"col-md-2 col-sm-12 button-logout\"},React.createElement(\"label\",null,React.createElement(\"button\",{type:\"button\",class:\"btn btn-danger\",onClick:this.handleSignOut},\"Log Out \",React.createElement(\"img\",{style:{width:'25px'},src:photo1})))))));}}}]);return ProfileUser;}(React.Component);export default connect(\"userData, userById, email, isLoading\",actions)(withRouter(ProfileUser));","map":{"version":3,"sources":["/home/alta17/Desktop/React_Portofolio/porto_react/src/components/profileUser.jsx"],"names":["React","photo","photo1","withRouter","Link","Redirect","connect","store","actions","axios","swal","allGenres","ProfileUser","handleSignOut","localStorage","removeItem","props","history","push","componentDidMount","req","method","url","getState","baseUrl","headers","Authorization","getItem","self","then","response","setState","userData","data","isLoading","validasiPostBuku","validasiUpdateBuku","catch","error","status","paddingTop","pathname","textAlign","nama_lengkap","email","width","Component"],"mappings":"i7BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,6BAAP,CACA,MAAO,2BAAP,CACA,MAAO,uBAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,OAASC,UAAT,CAAqBC,IAArB,CAA2BC,QAA3B,KAA2C,kBAA3C,CACA,OAASC,OAAT,KAAwB,gBAAxB,CACA,OAASC,KAAT,CAAgBC,OAAhB,KAA+B,UAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CAEA,GAAMC,CAAAA,SAAS,CAAG,CAAC,UAAD,CAAY,SAAZ,CAAsB,SAAtB,CAAgC,OAAhC,CAAwC,SAAxC,CAAkD,UAAlD,CAA6D,QAA7D,CAAsE,SAAtE,CAAgF,SAAhF,CAA0F,UAA1F,CAAqG,aAArG,CAAmH,QAAnH,CAA4H,OAA5H,CAAoI,aAApI,CAAkJ,UAAlJ,CAAlB,C,GAEMC,CAAAA,W,+ZAEFC,a,CAAgB,qLACNC,YAAY,CAACC,UAAb,CAAwB,OAAxB,CADM,0DAEND,YAAY,CAACC,UAAb,CAAwB,UAAxB,CAFM,0DAGND,YAAY,CAACC,UAAb,CAAwB,OAAxB,CAHM,SAIZL,IAAI,CAAC,eAAD,CAAkB,2CAAlB,CAA+D,SAA/D,CAAJ,CACA,MAAKM,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EALY,8C,OAShBC,iB,CAAoB,UAAM,CACtB,GAAMC,CAAAA,GAAG,CAAG,CACZC,MAAM,CAAE,KADI,CAEZC,GAAG,CAAEf,KAAK,CAACgB,QAAN,GAAiBC,OAAjB,CAAyB,eAFlB,CAGZC,OAAO,CAAE,CACLC,aAAa,CAAE,UAAYZ,YAAY,CAACa,OAAb,CAAqB,OAArB,CADtB,CAHG,CAAZ,CAOA,GAAMC,CAAAA,IAAI,8BAAV,CACAnB,KAAK,CAACW,GAAD,CAAL,CACKS,IADL,CACU,SAAUC,QAAV,CAAoB,CACtBvB,KAAK,CAACwB,QAAN,CAAe,CACXC,QAAQ,CAAEF,QAAQ,CAACG,IADR,CAEXC,SAAS,CAAC,KAFC,CAGXC,gBAAgB,CAAE,KAHP,CAIXC,kBAAkB,CAAE,KAJT,CAAf,EAMA,MAAON,CAAAA,QAAP,CACH,CATL,EAUKO,KAVL,CAUW,SAACC,KAAD,CAAS,CACZ/B,KAAK,CAACwB,QAAN,CAAe,CACXG,SAAS,CAAE,KADA,CAAf,EAGA,OAAQI,KAAK,CAACR,QAAN,CAAeS,MAAvB,EACI,IAAK,IAAL,CACIX,IAAI,CAACZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB,EACA,MACJ,IAAK,IAAL,CACIU,IAAI,CAACZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB,EACA,MACJ,IAAK,IAAL,CACIU,IAAI,CAACZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB,EACA,MACJ,IAAK,IAAL,CACIU,IAAI,CAACZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB,EACA,MACJ,QACI,MAdR,CAgBH,CA9BL,EA+BH,C,8EAEQ,iBAC2B,KAAKF,KADhC,CACGgB,QADH,aACGA,QADH,CACaE,SADb,aACaA,SADb,CAEL,GAAGA,SAAH,CAAa,CACT,MACA,gCACE,4BAAM,KAAK,CAAE,CAACM,UAAU,CAAC,OAAZ,CAAb,EACA,2BAAK,SAAS,CAAC,WAAf,EACE,2BAAK,SAAS,CAAC,KAAf,EACE,2BAAK,SAAS,CAAC,UAAf,EADF,CAGE,2BAAK,SAAS,CAAC,UAAf,EACE,2BAAK,KAAK,CAAC,QAAX,EADF,CAHF,CAME,2BAAK,SAAS,CAAC,UAAf,EANF,CADF,CADA,CADF,CADA,CAkBD,CACH,GAAI1B,YAAY,CAACa,OAAb,CAAqB,OAArB,GAAiC,IAArC,CAA0C,CACtC,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAE,CAAEc,QAAQ,CAAE,QAAZ,CAAd,EAAP,CACH,CAFD,IAEO,CACH,MACI,gCACI,2BAAK,SAAS,CAAC,wCAAf,EACI,2BAAK,SAAS,CAAC,KAAf,EACI,2BAAK,SAAS,CAAC,UAAf,EACI,0BAAI,KAAK,CAAE,CAACC,SAAS,CAAC,MAAX,CAAX,CAA+B,SAAS,CAAC,cAAzC,UAA8DV,QAAQ,CAACW,YAAvE,CADJ,CADJ,CADJ,CADJ,CAQI,2BAAK,SAAS,CAAC,wBAAf,EACI,2BAAK,SAAS,CAAC,KAAf,EACI,2BAAK,KAAK,CAAE,CAACD,SAAS,CAAC,MAAX,CAAZ,CAAgC,SAAS,CAAC,qBAA1C,EACKV,QAAQ,CAACY,KADd,CADJ,CADJ,CARJ,CAeI,2BAAK,SAAS,CAAC,WAAf,EACI,2BAAK,SAAS,CAAC,wBAAf,EACI,2BAAK,SAAS,CAAC,gCAAf,EACI,iCACI,oBAAC,IAAD,EAAM,EAAE,CAAC,OAAT,EACI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,cAA5B,eAAqD,2BAAK,KAAK,CAAE,CAACC,KAAK,CAAC,MAAP,CAAZ,CAA4B,GAAG,CAAE5C,KAAjC,EAArD,KADJ,CADJ,CADJ,CADJ,CASI,2BAAK,SAAS,CAAC,kCAAf,EACI,iCACI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,gBAA5B,CAA6C,OAAO,CAAE,KAAKY,aAA3D,aAAkF,2BAAK,KAAK,CAAE,CAACgC,KAAK,CAAC,MAAP,CAAZ,CAA4B,GAAG,CAAE3C,MAAjC,EAAlF,CADJ,CADJ,CATJ,CADJ,CAfJ,CADJ,CAmCH,CACJ,C,yBAlHqBF,KAAK,CAAC8C,S,EAqHhC,cAAexC,CAAAA,OAAO,CAAC,sCAAD,CAAwCE,OAAxC,CAAP,CAAwDL,UAAU,CAACS,WAAD,CAAlE,CAAf","sourcesContent":["import React from 'react';\nimport '../styles/bootstrap.min.css';\nimport '../styles/profileUser.css';\nimport '../styles/loading.css';\nimport photo from '../images/books.png';\nimport photo1 from '../images/exit.png';\nimport { withRouter, Link, Redirect } from 'react-router-dom';\nimport { connect } from 'unistore/react';\nimport { store, actions } from '../store';\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nconst allGenres = ['Romantis','Sejarah','Teenlit','Drama','Fantasi','Chicklit','Komedi','Misteri','Songlit','Thriller','Fan-Fiction','Dewasa','Horor','Petualangan','Metropop']\n\nclass ProfileUser extends React.Component {\n    // Function for user sign out\n    handleSignOut = async () => {\n        await localStorage.removeItem('token');\n        await localStorage.removeItem('is_login');\n        await localStorage.removeItem('email');\n        swal(\"Terima Kasih!\", \"Silakan login kembali untuk berburu buku!\", \"success\");\n        this.props.history.push(\"/\");\n    };\n\n    // Function to get user data for profile\n    componentDidMount = () => {\n        const req = {\n        method: \"get\",\n        url: store.getState().baseUrl+\"/user/profile\",\n        headers: {\n            Authorization: \"Bearer \" + localStorage.getItem('token')\n        }\n        }; \n        const self = this\n        axios(req)\n            .then(function (response) {\n                store.setState({ \n                    userData: response.data, \n                    isLoading:false, \n                    validasiPostBuku: false, \n                    validasiUpdateBuku: false\n                })\n                return response\n            })\n            .catch((error)=>{\n                store.setState({ \n                    isLoading: false\n                })\n                switch (error.response.status) {\n                    case 401 :\n                        self.props.history.push('/401')\n                        break\n                    case 403 :\n                        self.props.history.push('/403')\n                        break\n                    case 404 :\n                        self.props.history.push('/404')\n                        break\n                    case 500 :\n                        self.props.history.push('/500')\n                        break\n                    default :\n                        break\n                }\n            })\n    };\n\n    render() {\n        const { userData, isLoading } = this.props\n        if(isLoading){\n            return (\n            <div>\n              <body style={{paddingTop:'200px'}}>\n              <div className='container'>\n                <div className='row'>\n                  <div className='col-md-5'>\n                  </div>\n                  <div className='col-md-2'>\n                    <div class=\"loader\"></div>\n                  </div>\n                  <div className='col-md-5'>\n                  </div>\n                </div>\n               \n              </div>\n            </body>\n            </div>\n            )\n          }\n        if (localStorage.getItem('token') == null){\n            return <Redirect to={{ pathname: \"/login\" }} />;\n        } else {\n            return (\n                <div>\n                    <div className='container top-body-user user-full-name'>\n                        <div className='row'>\n                            <div className='col-md-6'>\n                                <h3 style={{textAlign:'left'}} className='border-user1'>Hai, {userData.nama_lengkap}</h3>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='container alamat-email'>\n                        <div className='row'>\n                            <div style={{textAlign:'left'}} className='col-md-11 col-sm-12'>\n                                {userData.email}\n                            </div>\n                        </div>\n                    </div>   \n                    <div className='container'>\n                        <div className='row space-under-button'>\n                            <div className='col-md-2 col-sm-12 button-sell'>\n                                <label>\n                                    <Link to='/sell'>\n                                        <button type=\"button\" class=\"btn btn-info\">Jual Buku <img style={{width:'25px'}} src={photo}></img> </button>\n                                    </Link>\n                                </label>\n                            </div>\n\n                            <div className='col-md-2 col-sm-12 button-logout'>\n                                <label>\n                                    <button type=\"button\" class=\"btn btn-danger\" onClick={this.handleSignOut}>Log Out <img style={{width:'25px'}} src={photo1}></img></button>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default connect(\"userData, userById, email, isLoading\",actions)(withRouter(ProfileUser));"]},"metadata":{},"sourceType":"module"}