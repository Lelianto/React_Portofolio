{"ast":null,"code":"import _regeneratorRuntime from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/alta17/Desktop/React_Portofolio/porto_react/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'../styles/bootstrap.min.css';import'../styles/allBooks.css';import{withRouter}from'react-router-dom';import{connect}from'unistore/react';import{store,actions}from'../store';import axios from'axios';var AccessAllCarts=/*#__PURE__*/function(_React$Component){_inherits(AccessAllCarts,_React$Component);function AccessAllCarts(){var _getPrototypeOf2;var _this;_classCallCheck(this,AccessAllCarts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AccessAllCarts)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.getAllCart=function(){var req={method:\"get\",url:store.getState().baseUrl+\"/cart/allcart\",headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}};var self=_assertThisInitialized(_this);axios(req).then(function(response){store.setState({adminAllCart:response.data,isLoading:false});return response;}).catch(function(error){store.setState({isLoading:false});switch(error.response.status){case 401:self.props.history.push('/401');break;case 403:self.props.history.push('/403');break;case 404:self.props.history.push('/404');break;case 422:self.props.history.push('/422');break;case 500:self.props.history.push('/500');break;default:break;}});};_this.doDelete=function _callee(e){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:store.setState({'cartId':e});_context.next=3;return _regeneratorRuntime.awrap(_this.props.deleteCart());case 3:if(localStorage.getItem('token')!==null){_this.getAllCart();_this.props.history.push(\"/carts\");}case 4:case\"end\":return _context.stop();}}});};_this.componentDidMount=function(){_this.getAllCart();};return _this;}_createClass(AccessAllCarts,[{key:\"render\",value:function render(){var _this2=this;var adminAllCart=this.props.adminAllCart;return React.createElement(\"div\",{className:\"container\",style:{paddingTop:'50px'}},React.createElement(\"div\",{className:\"row\"},React.createElement(\"table\",{class:\"table table-bordered\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"ID Keranjang\"),React.createElement(\"th\",null,\"ID Pembeli\"),React.createElement(\"th\",null,\"ID Buku\"),React.createElement(\"th\",null,\"Judul Buku\"),React.createElement(\"th\",null,\"Harga\"),React.createElement(\"th\",null,\"Banyak Pembelian\"),React.createElement(\"th\",null,\"Status Jual\"),React.createElement(\"th\",null,\"Hapus Akun\"))),React.createElement(\"tbody\",null,adminAllCart.map(function(cart,i){return React.createElement(\"tr\",null,React.createElement(\"td\",null,cart.id),React.createElement(\"td\",null,cart.user_id),React.createElement(\"td\",null,cart.book_id),React.createElement(\"td\",null,cart.judul),React.createElement(\"td\",null,cart.harga),React.createElement(\"td\",null,cart.stok),React.createElement(\"td\",null,cart.status_jual),React.createElement(\"td\",null,React.createElement(\"button\",{className:\"btn btn-danger\",style:{fontSize:'10px'},onClick:function onClick(){return _this2.doDelete(cart.id);}},\"Delete\")));})))));}}]);return AccessAllCarts;}(React.Component);export default connect(\"adminAllCart, isLoading , cartId\",actions)(withRouter(AccessAllCarts));","map":{"version":3,"sources":["/home/alta17/Desktop/React_Portofolio/porto_react/src/components/adminAllCart.jsx"],"names":["React","withRouter","connect","store","actions","axios","AccessAllCarts","getAllCart","req","method","url","getState","baseUrl","headers","Authorization","localStorage","getItem","self","then","response","setState","adminAllCart","data","isLoading","catch","error","status","props","history","push","doDelete","e","deleteCart","componentDidMount","paddingTop","map","cart","i","id","user_id","book_id","judul","harga","stok","status_jual","fontSize","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles/bootstrap.min.css';\nimport '../styles/allBooks.css';\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'unistore/react'\nimport { store, actions } from '../store'\nimport axios from 'axios'\n\nclass AccessAllCarts extends React.Component {\n    // Fungsi untuk mengambil semua list cart dari database\n    getAllCart = () => {\n        const req = {\n            method: \"get\",\n            url: store.getState().baseUrl+\"/cart/allcart\",\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem('token')\n            }\n            }; \n            const self = this\n            axios(req)\n                .then(function (response) {\n                    store.setState({ \n                        adminAllCart: response.data, \n                        isLoading:false\n                    })\n                    return response\n                })\n                .catch((error)=>{\n                    store.setState({ isLoading: false})\n                    switch (error.response.status) {\n                        case 401 :\n                            self.props.history.push('/401')\n                            break\n                        case 403 :\n                            self.props.history.push('/403')\n                            break\n                        case 404 :\n                            self.props.history.push('/404')\n                            break\n                        case 422 :\n                            self.props.history.push('/422')\n                            break\n                        case 500 :\n                            self.props.history.push('/500')\n                            break\n                        default :\n                            break\n                    }\n                })\n    }\n\n    // Fungsi untuk menghapus cart dari database sesuai ID\n    doDelete = async (e) => {\n        store.setState({\n            'cartId': e\n        })\n        await this.props.deleteCart()\n        if (localStorage.getItem('token') !== null){\n            this.getAllCart()\n            this.props.history.push(\"/carts\");\n        }\n    }\n\n    // Untuk menjalankan Fungsi getListCart\n    componentDidMount = () => {\n        this.getAllCart()\n    };\n\n    render() {\n        const { adminAllCart } = this.props\n        return (\n            <div className='container' style={{paddingTop:'50px'}}>\n                <div className='row'>\n                    <table class=\"table table-bordered\">\n                        <thead>\n                            <tr>\n                                <th>ID Keranjang</th>\n                                <th>ID Pembeli</th>\n                                <th>ID Buku</th>\n                                <th>Judul Buku</th>\n                                <th>Harga</th>\n                                <th>Banyak Pembelian</th>\n                                <th>Status Jual</th>\n                                <th>Hapus Akun</th>\t\t\t\t\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {adminAllCart.map((cart,i) =>\n                            <tr>\n                                <td>{cart.id}</td>\n                                <td>{cart.user_id}</td>\n                                <td>{cart.book_id}</td>\n                                <td>{cart.judul}</td>\n                                <td>{cart.harga}</td>\n                                <td>{cart.stok}</td>\n                                <td>{cart.status_jual}</td>\n                                <td>\n                                    <button className='btn btn-danger' style={{fontSize:'10px'}} onClick={()=>this.doDelete(cart.id)}>\n                                Delete\n                                    </button>\n                                </td>\n                            </tr>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(\"adminAllCart, isLoading , cartId\",actions)(withRouter(AccessAllCarts));"]},"metadata":{},"sourceType":"module"}